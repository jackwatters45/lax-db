pre-commit:
  jobs:
    - run: bun x ultracite fix
      glob:
        - "*.js"
        - "*.jsx"
        - "*.ts"
        - "*.tsx"
        - "*.json"
        - "*.jsonc"
        - "*.css"
      stage_fixed: true
  parallel: true
  commands:
    # check:
    #   glob: "*.{js,ts,jsx,tsx,json,md}"
    #   run: bunx biome check --write --unsafe --no-errors-on-unmatched --files-ignore-unknown=true {staged_files} && git update-index --again
    types:
      run: bun run typecheck
    ruff-check:
      glob: "packages/pipeline/**/*.py"
      run: ruff check --fix {staged_files}
    ruff-format:
      glob: "packages/pipeline/**/*.py"
      run: ruff format {staged_files}

pre-push:
  parallel: true
  commands:
    check:
      glob: "*.{js,ts,jsx,tsx,json,md}"
      run: bunx biome check --write --unsafe --no-errors-on-unmatched --files-ignore-unknown=true {staged_files} && git update-index --again
    types:
      run: bun run typecheck
